#cloud-config
hostname: "coreos-3"

# include one or more SSH public keys
ssh_authorized_keys:
- ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDRHszou88PKuVrmRTt2x5zRZyZIKD+vmehmH0Ivv0YyGRG8Ycqnl8bsJnvsoIEz++PXu36Q6zcLNlXBplHQXMB7LMknXmUp+BRZPobV96EDhd+LrumvGbnRcxR6I3pMX1Xz/Xct6ChQpOPUJQoEtYLUi+eyRBW2JjL/P3NwOmpMAd9mR340pvmcQ3h1BJXO2p4cjPBVqxvMX5oWFQpnXJa8qR6Sw4t+vG/C1eej9LLsi/K8L/bVYmkDHQokNAaJtPM1twU22htHMfHlZV2V+vZKqu2o1BTY7UsJ+EqVDkxZCN9vi7lhITmZ5yN4uYLc61Auy2GNndQf9cGHZw5UOh3 camposp@campospdesktop
- ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHMbgcOyWOY8cDSdhxXhoj0dZuQ8SMQioP+R83EAR1OzSs51REQN9B0qmo3hAhjJJp7+vlCg2xZ6s6YOzqbpof1qJQF5AmzOAY9T2FSIAZc+D5eRdphX/5agPqx3AXvlWpIJhJVoIC2F6t1yjpzyidNy/EfPAnhexjnJcRBJnf7QBKQvlHqPxnYWKwis0wF6CzYBR7GkLnCg7/oL8IJjCy+jAf8Du/fTtGVdChIXwmsEUKhXfId1fWZdV6JpQhTAAEX3FSKnz/V0KWdNlHfKbPGpFryJgqVZFhTzNqh/W2M6By2ncY2OHaTVKlOnm+ffMJDy18kQ+38R33fmFiSQ1N core@coreos1

coreos:
  etcd2:
    name: "coreos-3"
    discovery: "https://discovery.etcd.io/63ede945c6cab3235027ebc545e5c201"
    advertise-client-urls: "http://10.120.0.13:2379"
    initial-advertise-peer-urls: "http://10.120.0.13:2380"
    listen-client-urls: "http://10.120.0.13:2379,http://127.0.0.1:2379"
    listen-peer-urls: "http://10.120.0.13:2380"
write_files:
- path: /etc/systemd/network/10-enp0s3.network
  permissions: 0644
  owner: root
  content: |
        [Match]
        Name=enp0s3

        [Network]
        DNS=10.121.4.9
        Address=192.168.2.13/24
        Gateway=192.168.2.1
      
write_files:
- path: /etc/systemd/network/10-enp0s8.network
  permissions: 0644
  owner: root
  content: |
        [Match]
        Name=enp0s8
        [Network]
        Address=10.120.0.13/24

write_files:
- path: /etc/hosts
  content: |
        127.0.0.1     localhost
        192.168.2.11          coreos-1-pub
        192.168.2.12          coreos-2-pub
        192.168.2.13          coreos-3-pub
        10.120.0.11           coreos-1
        10.120.0.12           coreos-2
        10.120.0.13           coreos-3
        
write_files:
- path: /home/core/.ssh/id_rsa
  content: |
        -----BEGIN RSA PRIVATE KEY-----
        MIIEpAIBAAKCAQEAxzG4HDsljmPHA0nYcV4aI9HWbkPEjEIqD/kfNxAEdTs0rOdU
        REDfQdKpqN4QIYySae/r5QoNsWerOmDs6m6aH9aiUBeQJszgGPU9hUiAGXPg+XkX
        aYV/+WoD6sdwF75VqSCYSVaCAtherdco6c8onTcvxHzwJ4XsY5yXEQSZ3+0ASkL5
        R6j8Z2FisIrNMBegs2AUexpC5woO/6C/CCYwsvowH/A7v307RlXQoSF8JrBFCoV3
        yHdX1mXVeiaUIUwABF9xUip8/1dClnTZR3ymzxqRa8iYKlWRYU8zaof1tjOgctp3
        GNjh2k1SpTp5vn3zCQ8tfJEPt/Ed935hYkkNTQIDAQABAoIBABGWz1YW1vMi1mDw
        9V7VW2OMVO35p/JmqUYtzlbTYEFlz/nwl11LiStLydVyfmQoAInAOMlJwPnIWLNX
        +bOdvphPIJgH7J+weZ1akmshgsY8mEIPMkUMF8fTV7M0ly5RjUjY6vmW3PYZWwro
        s+EpfMGdLOehzKcAyWXmXuSOznOaVshvDVFXIxRdnpAgGzCjGMLhFrH5lCE2b9rx
        FABNgni0zBIrLXy5fuwyjw2ydDWnjFGKO64CjQ7wzaO0nXbSfJjBfXyZ/fMyQHwX
        b4kU7iOIKtF6yFfcWaW/QRi4lFfnt7ba/HVo0klprduIJK1V/cft3tBBLCOP7o27
        bZkZTcECgYEA/NqGmjnVpafBP/d9KOZmpOdeEj1x2Q2OiKryyUgpCoJXOws3+2QX
        o/Weu2Qa8rZzwZqeFug+sY2c2J8ww+RiGDGu7mhQ1k1VP3oGdmcoe4f+g2BAaCXP
        Hdo71sx6AMPB7JJymN3iujLZqcQHak0nZuy4A9VSd10lIYR6tDL5ETECgYEAyaxC
        a7A+dmZpo4IgHnATkgbwMzVfmDgf83Jo6IzqqwY+29K0/joWSiKZTOCXgYPja8+F
        Hj569TnLe8sRXZmuWAqwltDsbXG48lR7rIIVTGQSQ1J2MN+7x1pEj3JoJ0R0/ja5
        vK5dG6fOpLZKGT3+VVlFNr3wUoQccsEMpFu7Ft0CgYEA4XHx65a/YAkXq/H9XTc4
        s7U60eaJGK8Ws9I/0KmPNjiKkDFrg7B1x5GbKpeR03BL+4XhiKkgJO0PuLEPKMn7
        kHjT8Ot/j+O5q3QgSPenR6U0j2yFYJa9eW94RQdhjEb+I/FbTeMgYUYvfkczGVub
        UxCi7YAJHDYngh/9y6dbHTECgYAEr8cfX4okED82OIjsjCg4RYcBeaUOEYfUjX0Y
        omW1scB2NVBVdB4efO1ZFwMOVHVNhRYP3N3Yow4yg0aVCUQ+8YinCJXl+TWWFBaH
        rMI38z9lZx4uBpUDjfp35u26s+GQIs9wLhEl2mF3/HB+Y61saFWubv2NvVo35HqZ
        uzP+1QKBgQDVKERqqtvyUDsEqedeThuZLBrKZuCj5dVbMU7PDkky96qb03GBcvPp
        IO6F6AA3l6MGJr/+3IRaTsGteDqkq6joQunCeIXRmyo0oZ27bOz04OMGgaXyzmOi
        N2QBKAIBroETSbpjtvLj8EgynOrjGrWyiouZ5tM+ywf9+QTCP/CEHQ==
        -----END RSA PRIVATE KEY-----

write_files:
- path: /home/core/.ssh/id_rsa.pub
  content: |
        ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHMbgcOyWOY8cDSdhxXhoj0dZuQ8SMQioP+R83EAR1OzSs51REQN9B0qmo3hAhjJJp7+vlCg2xZ6s6YOzqbpof1qJQF5AmzOAY9T2FSIAZc+D5eRdphX/5agPqx3AXvlWpIJhJVoIC2F6t1yjpzyidNy/EfPAnhexjnJcRBJnf7QBKQvlHqPxnYWKwis0wF6CzYBR7GkLnCg7/oL8IJjCy+jAf8Du/fTtGVdChIXwmsEUKhXfId1fWZdV6JpQhTAAEX3FSKnz/V0KWdNlHfKbPGpFryJgqVZFhTzNqh/W2M6By2ncY2OHaTVKlOnm+ffMJDy18kQ+38R33fmFiSQ1N core@coreos1
